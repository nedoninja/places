# Документация к Django-проекту "Сервис заказа услуг"

## Общее описание
Проект представляет собой платформу для заказа и оказания услуг между пользователями с разными ролями (заказчики и исполнители). Основной функционал включает:
- Регистрацию и аутентификацию пользователей
- Создание и управление услугами
- Систему платежей и транзакций
- Чат между пользователями
- Систему отзывов

## Модели данных
Основные модели системы:
- `User` - стандартная модель пользователя Django
- `Profile` - расширенный профиль пользователя
- `Service` - услуги, предлагаемые исполнителями
- `Feedback` - отзывы о услугах
- `Wallet` - кошелек пользователя
- `Transaction` - история транзакций
- `ServiceRequest` - запросы на услуги
- `Chat` - чаты между пользователями

## Основные представления (Views)

### Аутентификация и регистрация
- **register** - регистрация нового пользователя с подтверждением по email
- **user_login** - вход в систему
- **user_logout** - выход из системы
- **activate** - активация аккаунта по ссылке из email

### Профиль пользователя
- **profile** - просмотр профиля пользователя
- **add_balance** - пополнение баланса кошелька

### Управление услугами
- **index** - главная страница со списком услуг
- **service_detail** - детальная страница услуги
- **create_service** - создание новой услуги (только для исполнителей)
- **request_service** - запрос на оказание услуги

### Управление запросами
- **user_requests** - список запросов пользователя
- **view_request** - просмотр деталей запроса
- **update_request_status** - изменение статуса запроса (для исполнителей)
- **complete_payment** - завершение оплаты услуги

### Отзывы
- **my_feedbacks** - просмотр отзывов для исполнителя
- Оставление отзывов реализовано в **service_detail**

### Чат
- **create_chat** - создание нового чата
- **chat_list** - список чатов пользователя
- **serve_chat_file** - отображение чата

## Система ролей
- **Заказчик (customer)** - может заказывать услуги, оставлять отзывы
- **Исполнитель (executor)** - может создавать услуги, управлять запросами

## Особенности реализации

### Безопасность
- Проверка прав доступа с помощью декораторов `@login_required` и `@user_passes_test`
- Подтверждение email при регистрации
- Защита от CSRF
- Использование транзакций для финансовых операций

### Финансовая система
- Каждый пользователь имеет кошелек
- Все операции фиксируются в истории транзакций
- При запросе услуги средства резервируются
- Окончательный перевод происходит после подтверждения выполнения

### Дополнительные функции
- Система уведомлений через messages framework
- Валидация вводимых данных
- Обработка ошибок

## Шаблоны (Templates)
Основные шаблоны:
- `register.html` - форма регистрации
- `login.html` - форма входа
- `index.html` - главная страница
- `profile.html` - профиль пользователя
- `service_detail.html` - детали услуги
- `create_service.html` - создание услуги
- `add_balance.html` - пополнение баланса
- `request_list.html` - список запросов
- `view_request.html` - просмотр запроса
- `my_feedbacks.html` - отзывы
- `chats/list.html` - список чатов

## Настройки
Проект использует стандартные настройки Django с добавлением:
- Настройки email для отправки писем
- Конфигурация медиа-файлов
- Кастомные обработчики ошибок

## Зависимости
- Django
- Python-decouple (для настроек)
- Pillow (для работы с изображениями)

## Установка и запуск
1. Установить зависимости: `pip install -r requirements.txt`
2. Настроить базу данных в settings.py
3. Выполнить миграции: `python manage.py migrate`
4. Запустить сервер: `python manage.py runserver`
